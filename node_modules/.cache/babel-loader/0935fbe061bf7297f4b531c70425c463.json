{"ast":null,"code":"import AuthService from '../../services/AuthService';\nimport { setCurrentUser, registerSuccess, logoutUser, getErrors } from \"./actionCreators\";\n/**\n * Login user action\n */\n\nexport var loginUser = function loginUser(state, history) {\n  return function (dispatch) {\n    AuthService.login(data).then(function (resp) {\n      console.log(\"response is: \".concat(resp));\n\n      if (resp.data.success) {\n        console.log(' response data token:' + resp.data.profile);\n        dispatch(setCurrentUser(resp.data.profile));\n        console.log('user set');\n        AuthService.saveToken(resp.data.token);\n        history.push('/');\n      }\n    }).catch(function (error) {\n      dispatch(getErrors({\n        loginError: error\n      }));\n    });\n  };\n};\n/**\n * Logout action\n */\n\nexport var logout = function logout(history) {\n  return function (dispatch) {\n    AuthService.logout();\n    dispatch(logoutUser());\n    history.push('/');\n    window.location.reload();\n  };\n};\n/**\n * Register user action\n */\n\nexport var registerUser = function registerUser(user, history) {\n  return function (dispatch) {\n    AuthService.signup(user).then(function (resp) {\n      console.log('the user is:' + resp);\n\n      if (resp.data.success) {\n        dispatch(registerSuccess());\n        history.push('/api/users/login');\n      }\n    }).catch(function (error) {\n      if (error.response.data) {\n        dispatch(getErrors({\n          registerError: error.response.data.error\n        }));\n      }\n    });\n  };\n};","map":{"version":3,"sources":["/home/realoj/RealProjects/msoto-frontend/src/store/actions/auth.js"],"names":["AuthService","setCurrentUser","registerSuccess","logoutUser","getErrors","loginUser","state","history","dispatch","login","data","then","resp","console","log","success","profile","saveToken","token","push","catch","error","loginError","logout","window","location","reload","registerUser","user","signup","response","registerError"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,4BAAxB;AACA,SAASC,cAAT,EAAyBC,eAAzB,EAA0CC,UAA1C,EAAsDC,SAAtD,QAAuE,kBAAvE;AAEA;;;;AAGA,OAAO,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,KAAD,EAAQC,OAAR;AAAA,SAAoB,UAAAC,QAAQ,EAAI;AACvDR,IAAAA,WAAW,CAACS,KAAZ,CAAkBC,IAAlB,EAAwBC,IAAxB,CAA6B,UAAAC,IAAI,EAAI;AACnCC,MAAAA,OAAO,CAACC,GAAR,wBAA4BF,IAA5B;;AACA,UAAIA,IAAI,CAACF,IAAL,CAAUK,OAAd,EAAuB;AACrBF,QAAAA,OAAO,CAACC,GAAR,CAAY,0BAA0BF,IAAI,CAACF,IAAL,CAAUM,OAAhD;AACAR,QAAAA,QAAQ,CAACP,cAAc,CAACW,IAAI,CAACF,IAAL,CAAUM,OAAX,CAAf,CAAR;AACAH,QAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAd,QAAAA,WAAW,CAACiB,SAAZ,CAAsBL,IAAI,CAACF,IAAL,CAAUQ,KAAhC;AACAX,QAAAA,OAAO,CAACY,IAAR,CAAa,GAAb;AACD;AACF,KATD,EASGC,KATH,CASS,UAAAC,KAAK,EAAI;AACdb,MAAAA,QAAQ,CAACJ,SAAS,CAAC;AACjBkB,QAAAA,UAAU,EAAED;AADK,OAAD,CAAV,CAAR;AAGH,KAbD;AAcD,GAfwB;AAAA,CAAlB;AAiBP;;;;AAGA,OAAO,IAAME,MAAM,GAAG,SAATA,MAAS,CAAChB,OAAD;AAAA,SAAa,UAAAC,QAAQ,EAAI;AAC7CR,IAAAA,WAAW,CAACuB,MAAZ;AACAf,IAAAA,QAAQ,CAACL,UAAU,EAAX,CAAR;AACAI,IAAAA,OAAO,CAACY,IAAR,CAAa,GAAb;AACAK,IAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACD,GALqB;AAAA,CAAf;AAOP;;;;AAGA,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,IAAD,EAAOrB,OAAP;AAAA,SAAmB,UAAAC,QAAQ,EAAI;AACzDR,IAAAA,WAAW,CAAC6B,MAAZ,CAAmBD,IAAnB,EAAyBjB,IAAzB,CAA8B,UAAAC,IAAI,EAAI;AACpCC,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAiBF,IAA7B;;AACA,UAAIA,IAAI,CAACF,IAAL,CAAUK,OAAd,EAAuB;AACrBP,QAAAA,QAAQ,CAACN,eAAe,EAAhB,CAAR;AACAK,QAAAA,OAAO,CAACY,IAAR,CAAa,kBAAb;AACD;AACF,KAND,EAMGC,KANH,CAMS,UAAAC,KAAK,EAAI;AAChB,UAAIA,KAAK,CAACS,QAAN,CAAepB,IAAnB,EAAyB;AACvBF,QAAAA,QAAQ,CAACJ,SAAS,CAAC;AACjB2B,UAAAA,aAAa,EAAEV,KAAK,CAACS,QAAN,CAAepB,IAAf,CAAoBW;AADlB,SAAD,CAAV,CAAR;AAGD;AACF,KAZD;AAaD,GAd2B;AAAA,CAArB","sourcesContent":["import AuthService from '../../services/AuthService';\nimport { setCurrentUser, registerSuccess, logoutUser, getErrors } from \"./actionCreators\";\n\n/**\n * Login user action\n */\nexport const loginUser = (state, history) => dispatch => {\n  AuthService.login(data).then(resp => {\n    console.log(`response is: ${resp}`)\n    if (resp.data.success) {\n      console.log(' response data token:' + resp.data.profile);\n      dispatch(setCurrentUser(resp.data.profile));\n      console.log('user set')\n      AuthService.saveToken(resp.data.token);\n      history.push('/');\n    }\n  }).catch(error => {\n      dispatch(getErrors({\n        loginError: error\n      }));\n  });\n}\n\n/**\n * Logout action\n */\nexport const logout = (history) => dispatch => {\n  AuthService.logout();\n  dispatch(logoutUser());\n  history.push('/')\n  window.location.reload();\n}\n\n/**\n * Register user action\n */\nexport const registerUser = (user, history) => dispatch => {\n  AuthService.signup(user).then(resp => {\n    console.log('the user is:' + resp)\n    if (resp.data.success) {\n      dispatch(registerSuccess());\n      history.push('/api/users/login');\n    }\n  }).catch(error => {\n    if (error.response.data) {\n      dispatch(getErrors({\n        registerError: error.response.data.error\n      }));\n    }\n  });\n}\n"]},"metadata":{},"sourceType":"module"}